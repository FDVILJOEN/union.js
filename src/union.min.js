function buildPage(e){if(topLevel=new Proxy(e,proxyHandler),mappings=[],e.head){e.head.domKey="--head--";for(const t in e.head)document[t]=e.head[t]}if(e.style){var t=document.createElement("style");t.id="--style--",document.head.appendChild(t),loadStyle(t,e.style)}e.body&&(loadObject(document.body,e.body,"topLevel.body"),e.body.onload&&e.body.onload())}function loadStyle(e,t){var n=[];for(const e in t)if("object"==typeof t[e]){var o=e+" {";for(const n in t[e])o+=n+":"+t[e][n]+";";o+="}",n.push(o)}e.innerText=n.join("\n")}function loadObject(e,t,n){t.domKey=n;for(const r in t)if("object"==typeof t[r]){if("mapObj"!=r)if(Array.isArray(t[r])){var o="div",d=document.createElement(o);d.id=n+"."+r,e.appendChild(d),loadObject(d,t[r],n+"."+r)}else{o="div";t[r].tag&&(o=t[r].tag);d=document.createElement(o);d.id=n+"."+r,e.appendChild(d),loadObject(d,t[r],n+"."+r)}}else if("function"==typeof t[r])"on"==r.substring(0,2)?e.addEventListener(r.substring(2).toLowerCase(),Function("applyMappings(); "+n+"."+r+".call(topLevel.body, topLevel);")):e[r]=t[r];else{if("mapAttr"==r&&t.mapObj){mappings.push({domKey:t.domKey,target:t.mapObj,attr:t.mapAttr});var a=t.mapObj[t.mapAttr];e.innerText=a,e.value=a}"value"==r&&(e.innerText=t[r]),e[r]=t[r]}}function applyMappings(){mappings.forEach(e=>{domObj=document.getElementById(e.domKey),domObj.value?e.target[e.attr]=domObj.value:e.target[e.attr]=domObj.innerText})}var topLevel,mappings=[],proxyHandler={get(e,t){if("mapObj"==t)return e[t];if("object"==typeof e[t]&&null!==e[t])return new Proxy(e[t],proxyHandler);if(e.domKey){var n=document.getElementById(e.domKey);if(n[t])return n[t];if("value"==t)return n.innerText}return e[t]},set(e,t,n){if(e[t]=n,e.domKey){if(Array.isArray(e)){var o=document.getElementById(e.domKey);return o.innerText="",loadObject(o,e,e.domKey),!0}if("--head--"==e.domKey)document[t]=e[t];else{if("tag"!=t)return"value"==t&&(document.getElementById(e.domKey).innerText=n),document.getElementById(e.domKey)[t]=n,!0;var d=document.getElementById(e.domKey),a=document.createElement(n);a.id=d.id,d.parentNode.replaceChild(a,d),loadObject(a,e,a.id),d.value&&(a.value=d.value,a.innerText=d.value)}}else loadStyle(document.getElementById("--style--"),topLevel.style)}};